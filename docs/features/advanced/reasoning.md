# Reasoning Tokens

## Feature Overview

Reasoning tokens enable AI models to show their thinking process when solving complex problems. This feature allows models to work through problems step-by-step, showing intermediate reasoning before providing final answers. Reasoning tokens are particularly valuable for complex analysis, mathematics, and problem-solving tasks where understanding the thought process is important.

*رموز التفكير تمكن نماذج الذكاء الاصطناعي من إظهار عملية تفكيرها عند حل المشاكل المعقدة. تتيح هذه الميزة للنماذج العمل على المشاكل خطوة بخطوة، وإظهار التفكير المتوسط قبل تقديم الإجابات النهائية. رموز التفكير مفيدة بشكل خاص للتحليل المعقد والرياضيات ومهام حل المشاكل حيث فهم عملية التفكير مهم.*

## Feature Importance

Reasoning tokens transform AI from a black box that produces answers into a transparent system that shows its work. This transparency is crucial for debugging, understanding model behavior, building trust, and ensuring correctness—especially for critical applications like medical diagnosis, financial analysis, or scientific research.

*رموز التفكير تحول الذكاء الاصطناعي من صندوق أسود ينتج إجابات إلى نظام شفاف يظهر عمله. هذه الشفافية ضرورية للتشخيص وفهم سلوك النموذج وبناء الثقة وضمان الصحة—خاصة للتطبيقات الحرجة مثل التشخيص الطبي أو التحليل المالي أو البحث العلمي.*

## Key Benefits

### Transparency and Trust
Reasoning tokens show how the model arrives at conclusions, making AI decisions explainable and trustworthy. Users can see the thought process, understand reasoning, and verify correctness.

*رموز التفكير تظهر كيف يصل النموذج إلى الاستنتاجات، مما يجعل قرارات الذكاء الاصطناعي قابلة للشرح وموثوقة. يمكن للمستخدمين رؤية عملية التفكير وفهم المنطق والتحقق من الصحة.*

### Improved Accuracy
By working through problems step-by-step, models can catch errors, verify intermediate steps, and produce more accurate results. Reasoning helps models avoid common mistakes and logical errors.

*من خلال العمل على المشاكل خطوة بخطوة، يمكن للنماذج اكتشاف الأخطاء والتحقق من الخطوات المتوسطة وإنتاج نتائج أكثر دقة. التفكير يساعد النماذج على تجنب الأخطاء الشائعة والأخطاء المنطقية.*

### Debugging and Analysis
Reasoning tokens enable debugging of model behavior. You can see where models make mistakes, understand failure modes, and improve prompts or configurations based on reasoning patterns.

*رموز التفكير تمكن من تشخيص سلوك النموذج. يمكنك رؤية أين ترتكب النماذج الأخطاء وفهم أنماط الفشل وتحسين المطالب أو التكوينات بناءً على أنماط التفكير.*

### Educational Value
Reasoning tokens provide educational value by showing problem-solving approaches. Students and learners can see how complex problems are solved, learning from the reasoning process.

*رموز التفكير توفر قيمة تعليمية من خلال إظهار نهج حل المشاكل. الطلاب والمتعلمون يمكنهم رؤية كيفية حل المشاكل المعقدة، والتعلم من عملية التفكير.*

### Complex Problem Solving
Reasoning tokens enable models to tackle complex, multi-step problems that require careful analysis. Models can break down problems, work through sub-problems, and synthesize solutions.

*رموز التفكير تمكن النماذج من معالجة المشاكل المعقدة متعددة الخطوات التي تتطلب تحليلاً دقيقاً. يمكن للنماذج تقسيم المشاكل والعمل على المشاكل الفرعية وتوليف الحلول.*

## Use Cases

### Mathematical Problem Solving
Use reasoning tokens for complex mathematical problems, proofs, and calculations. The reasoning process shows step-by-step work, making it easier to verify correctness and understand solutions.

*استخدم رموز التفكير للمشاكل الرياضية المعقدة والبراهين والحسابات. عملية التفكير تظهر العمل خطوة بخطوة، مما يسهل التحقق من الصحة وفهم الحلول.*

### Scientific Analysis
Analyze scientific data, interpret results, and draw conclusions with reasoning tokens. The thinking process helps ensure scientific rigor and enables peer review of AI-generated analysis.

*حلل البيانات العلمية وفسر النتائج واستخلص الاستنتاجات مع رموز التفكير. عملية التفكير تساعد في ضمان الصرامة العلمية وتمكن مراجعة الأقران للتحليل المولد من الذكاء الاصطناعي.*

### Financial Analysis
Perform financial analysis, risk assessment, and investment decisions with reasoning tokens. The reasoning process provides transparency for critical financial decisions and enables audit trails.

*نفذ التحليل المالي وتقييم المخاطر وقرارات الاستثمار مع رموز التفكير. عملية التفكير توفر الشفافية للقرارات المالية الحرجة وتمكن مسارات التدقيق.*

### Medical Diagnosis Support
Use reasoning tokens for medical analysis and diagnosis support. The reasoning process shows how conclusions are reached, enabling medical professionals to review and validate AI reasoning.

*استخدم رموز التفكير للتحليل الطبي ودعم التشخيص. عملية التفكير تظهر كيف يتم الوصول إلى الاستنتاجات، مما يتيح للمهنيين الطبيين مراجعة والتحقق من منطق الذكاء الاصطناعي.*

### Legal Analysis
Analyze legal documents, case law, and regulations with reasoning tokens. The reasoning process shows legal analysis steps, making AI-generated legal insights more trustworthy and reviewable.

*حلل المستندات القانونية وسوابق القضاء واللوائح مع رموز التفكير. عملية التفكير تظهر خطوات التحليل القانوني، مما يجعل الرؤى القانونية المولدة من الذكاء الاصطناعي أكثر موثوقية وقابلة للمراجعة.*

## Performance Considerations

### Processing Time
Reasoning tokens increase processing time because models must generate intermediate reasoning steps. Higher reasoning effort levels take longer but produce more thorough analysis.

*رموز التفكير تزيد وقت المعالجة لأن النماذج يجب أن تولد خطوات التفكير المتوسطة. مستويات جهد التفكير الأعلى تستغرق وقتاً أطول لكنها تنتج تحليلاً أكثر شمولاً.*

### Token Consumption
Reasoning tokens consume additional tokens for the reasoning process. Higher effort levels consume more tokens. Consider whether reasoning is needed for each use case to balance quality and cost.

*رموز التفكير تستهلك رموزاً مميزة إضافية لعملية التفكير. مستويات الجهد الأعلى تستهلك المزيد من الرموز المميزة. ضع في الاعتبار ما إذا كان التفكير مطلوباً لكل حالة استخدام لتحقيق التوازن بين الجودة والتكلفة.*

### Response Length
Responses with reasoning tokens are longer because they include both reasoning and final answers. This increases response time and token costs but provides valuable transparency.

*الاستجابات مع رموز التفكير أطول لأنها تتضمن كل من التفكير والإجابات النهائية. هذا يزيد وقت الاستجابة وتكاليف الرموز المميزة لكنه يوفر شفافية قيمة.*

### Excluding Reasoning from Response
You can exclude reasoning tokens from the final response while still benefiting from the reasoning process. This reduces response length and costs while maintaining improved accuracy from reasoning.

*يمكنك استبعاد رموز التفكير من الاستجابة النهائية مع الاستمرار في الاستفادة من عملية التفكير. هذا يقلل طول الاستجابة والتكاليف مع الحفاظ على الدقة المحسّنة من التفكير.*

## Cost Implications

### Additional Token Costs
Reasoning tokens add significant token consumption—often doubling or tripling token usage compared to standard responses. Higher reasoning effort levels consume more tokens.

*رموز التفكير تضيف استهلاك رموز مميزة كبير—غالباً ما تضاعف أو تضاعف ثلاث مرات استخدام الرموز المميزة مقارنة بالاستجابات القياسية. مستويات جهد التفكير الأعلى تستهلك المزيد من الرموز المميزة.*

### Effort Level Impact
Different reasoning effort levels have different costs: MINIMAL uses fewer tokens, while XHIGH uses significantly more. Choose the appropriate effort level based on problem complexity and cost constraints.

*مستويات جهد التفكير المختلفة لها تكاليف مختلفة: MINIMAL يستخدم رموزاً مميزة أقل، بينما XHIGH يستخدم المزيد بشكل كبير. اختر مستوى الجهد المناسب بناءً على تعقيد المشكلة وقيود التكلفة.*

### Excluding Reasoning
Excluding reasoning from responses reduces token costs while still benefiting from improved accuracy. Use this option when reasoning transparency isn't needed but accuracy improvements are valuable.

*استبعاد التفكير من الاستجابات يقلل تكاليف الرموز المميزة مع الاستمرار في الاستفادة من تحسينات الدقة. استخدم هذا الخيار عندما لا تكون شفافية التفكير مطلوبة لكن تحسينات الدقة قيمة.*

### Cost-Benefit Analysis
Consider whether the benefits of reasoning (improved accuracy, transparency) justify the increased costs. For critical applications, reasoning is often worth the cost. For simple tasks, standard responses may suffice.

*ضع في الاعتبار ما إذا كانت فوائد التفكير (تحسين الدقة، الشفافية) تبرر التكاليف المتزايدة. للتطبيقات الحرجة، التفكير غالباً ما يستحق التكلفة. للمهام البسيطة، الاستجابات القياسية قد تكون كافية.*

## Best Practices

### Effort Level Selection
Choose reasoning effort level based on problem complexity: MINIMAL for simple problems, MEDIUM for moderate complexity, HIGH for complex problems, XHIGH for extremely complex analysis. Match effort to problem difficulty.

*اختر مستوى جهد التفكير بناءً على تعقيد المشكلة: MINIMAL للمشاكل البسيطة، MEDIUM للتعقيد المعتدل، HIGH للمشاكل المعقدة، XHIGH للتحليل المعقد للغاية. طابق الجهد مع صعوبة المشكلة.*

### When to Use Reasoning
Use reasoning for complex problems requiring careful analysis: mathematics, scientific analysis, financial decisions, medical diagnosis, legal analysis. Avoid reasoning for simple tasks where it adds cost without significant benefit.

*استخدم التفكير للمشاكل المعقدة التي تتطلب تحليلاً دقيقاً: الرياضيات، التحليل العلمي، القرارات المالية، التشخيص الطبي، التحليل القانوني. تجنب التفكير للمهام البسيطة حيث يضيف تكلفة دون فائدة كبيرة.*

### Excluding Reasoning
Exclude reasoning from responses when transparency isn't needed but accuracy improvements are valuable. This reduces costs while maintaining improved results from the reasoning process.

*استبعد التفكير من الاستجابات عندما لا تكون الشفافية مطلوبة لكن تحسينات الدقة قيمة. هذا يقلل التكاليف مع الحفاظ على النتائج المحسّنة من عملية التفكير.*

### Extracting Reasoning
Extract and analyze reasoning tokens separately from final answers. This enables reasoning analysis, debugging, and educational applications while keeping final responses concise.

*استخرج وحلل رموز التفكير بشكل منفصل عن الإجابات النهائية. هذا يتيح تحليل التفكير والتشخيص والتطبيقات التعليمية مع الحفاظ على الاستجابات النهائية موجزة.*

### Model Selection
Use models that support reasoning tokens effectively. Claude models, especially Claude Sonnet 4, have excellent reasoning capabilities. Ensure your chosen model supports reasoning tokens.

*استخدم النماذج التي تدعم رموز التفكير بفعالية. نماذج Claude، خاصة Claude Sonnet 4، لديها قدرات تفكير ممتازة. تأكد من أن النموذج المختار يدعم رموز التفكير.*

## When NOT to Use

### Don't Use for Simple Tasks
Avoid reasoning tokens for simple questions or tasks that don't require complex analysis. Reasoning adds cost and time without significant benefit for straightforward queries.

*تجنب رموز التفكير للأسئلة أو المهام البسيطة التي لا تتطلب تحليلاً معقداً. التفكير يضيف تكلفة ووقت دون فائدة كبيرة للاستفسارات المباشرة.*

### Don't Use Maximum Effort Unnecessarily
Avoid XHIGH reasoning effort unless dealing with extremely complex problems. Higher effort levels significantly increase costs and processing time. Use appropriate effort levels for problem complexity.

*تجنب جهد التفكير XHIGH ما لم تكن تتعامل مع مشاكل معقدة للغاية. مستويات الجهد الأعلى تزيد التكاليف ووقت المعالجة بشكل كبير. استخدم مستويات الجهد المناسبة لتعقيد المشكلة.*

### Don't Ignore Cost Implications
Don't enable reasoning without considering costs. Reasoning can double or triple token consumption. Ensure the benefits justify the increased costs for your use case.

*لا تفعّل التفكير دون النظر في التكاليف. التفكير يمكن أن يضاعف أو يضاعف ثلاث مرات استهلاك الرموز المميزة. تأكد من أن الفوائد تبرر التكاليف المتزايدة لحالة الاستخدام.*

### Don't Use Without Model Support
Don't use reasoning tokens with models that don't support them effectively. Some models may not benefit significantly from reasoning tokens. Use models optimized for reasoning.

*لا تستخدم رموز التفكير مع النماذج التي لا تدعمها بفعالية. بعض النماذج قد لا تستفيد بشكل كبير من رموز التفكير. استخدم النماذج المحسّنة للتفكير.*

## Troubleshooting

### Reasoning Not Appearing
If reasoning tokens aren't appearing, verify the model supports reasoning tokens. Check that reasoning effort is set correctly. Some models may not show reasoning even when enabled.

*إذا لم تظهر رموز التفكير، تحقق من أن النموذج يدعم رموز التفكير. تحقق من أن جهد التفكير مضبوط بشكل صحيح. بعض النماذج قد لا تظهر التفكير حتى عند التمكين.*

### High Token Costs
If token costs are high, review reasoning effort level. Consider using lower effort levels or excluding reasoning from responses. Evaluate whether reasoning benefits justify the costs.

*إذا كانت تكاليف الرموز المميزة عالية، راجع مستوى جهد التفكير. فكر في استخدام مستويات جهد أقل أو استبعاد التفكير من الاستجابات. قيّم ما إذا كانت فوائد التفكير تبرر التكاليف.*

### Long Processing Times
If processing takes too long, reduce reasoning effort level. Consider excluding reasoning from responses if transparency isn't needed. Use reasoning only when necessary.

*إذا استغرقت المعالجة وقتاً طويلاً، قلل مستوى جهد التفكير. فكر في استبعاد التفكير من الاستجابات إذا لم تكن الشفافية مطلوبة. استخدم التفكير فقط عند الضرورة.*

### Poor Reasoning Quality
If reasoning quality is poor, try increasing reasoning effort level. Ensure you're using a model that supports reasoning effectively. Provide clear, specific prompts to guide reasoning.

*إذا كانت جودة التفكير ضعيفة، جرب زيادة مستوى جهد التفكير. تأكد من أنك تستخدم نموذجاً يدعم التفكير بفعالية. وفر مطالب واضحة ومحددة لتوجيه التفكير.*

## Basic Usage

### Enable Reasoning

*تمكين التفكير*

```python
from app.builders import ChatRequestBuilder
from app.enums import ReasoningEffort

request = (ChatRequestBuilder()
    .with_model("anthropic/claude-sonnet-4")
    .with_text("Solve this math problem: 2+2")
    .with_reasoning(ReasoningEffort.HIGH)
    .build())
```

### Reasoning Effort Levels

*مستويات جهد التفكير*

- `XHIGH` - Maximum reasoning
  *`XHIGH` - التفكير الأقصى*
- `HIGH` - High reasoning
  *`HIGH` - تفكير عالي*
- `MEDIUM` - Medium reasoning
  *`MEDIUM` - تفكير متوسط*
- `LOW` - Low reasoning
  *`LOW` - تفكير منخفض*
- `MINIMAL` - Minimal reasoning
  *`MINIMAL` - تفكير أدنى*
- `NONE` - No reasoning
  *`NONE` - بدون تفكير*

### Exclude Reasoning from Response

*استبعاد التفكير من الاستجابة*

```python
request = (ChatRequestBuilder()
    .with_model("anthropic/claude-sonnet-4")
    .with_text("Solve this problem")
    .with_reasoning(ReasoningEffort.HIGH, exclude=True)
    .build())
```

### Extract Reasoning

*استخراج التفكير*

```python
from app.processors import ReasoningExtractor

response = await client.chat_completion(request)
extractor = ReasoningExtractor()
reasoning = extractor.extract_reasoning_text(response)
```

## Advanced Examples

### Complex Mathematical Problem

*مشكلة رياضية معقدة*

```python
from app.builders import ChatRequestBuilder
from app.enums import ReasoningEffort

request = (ChatRequestBuilder()
    .with_model("anthropic/claude-sonnet-4")
    .with_text("Solve: Find the derivative of f(x) = x^3 + 2x^2 - 5x + 1 and explain each step")
    .with_reasoning(ReasoningEffort.XHIGH)
    .build())
```

### Scientific Analysis with Reasoning

*تحليل علمي مع التفكير*

```python
request = (ChatRequestBuilder()
    .with_model("anthropic/claude-sonnet-4")
    .with_text("Analyze this experimental data and explain your reasoning: [data]")
    .with_reasoning(ReasoningEffort.HIGH)
    .build())
```

### Financial Analysis

*التحليل المالي*

```python
request = (ChatRequestBuilder()
    .with_model("anthropic/claude-sonnet-4")
    .with_text("Analyze this investment opportunity and explain your risk assessment")
    .with_reasoning(ReasoningEffort.HIGH, exclude=False)  # Show reasoning for transparency
    .build())
```

### Reasoning Without Response Inclusion

*التفكير دون تضمين الاستجابة*

```python
# Get improved accuracy from reasoning without showing reasoning in response
request = (ChatRequestBuilder()
    .with_model("anthropic/claude-sonnet-4")
    .with_text("Solve this complex problem")
    .with_reasoning(ReasoningEffort.HIGH, exclude=True)  # Reasoning improves accuracy but isn't shown
    .build())
```
