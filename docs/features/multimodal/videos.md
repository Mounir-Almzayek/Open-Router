# Videos

## Feature Overview

Video processing enables AI models to understand and analyze video content frame-by-frame or as a whole. This feature allows you to send video files to AI models for scene understanding, action recognition, content analysis, and temporal pattern detection. Videos can be provided via URLs, base64 encoding, or direct file uploads.

*معالجة الفيديو تمكن نماذج الذكاء الاصطناعي من فهم وتحليل محتوى الفيديو إطاراً بإطار أو ككل. تتيح لك هذه الميزة إرسال ملفات الفيديو إلى نماذج الذكاء الاصطناعي لفهم المشاهد والتعرف على الإجراءات وتحليل المحتوى واكتشاف الأنماط الزمنية. يمكن توفير الفيديوهات عبر عناوين URL أو ترميز base64 أو رفع الملفات مباشرة.*

## Feature Importance

Video understanding extends AI capabilities beyond static images to dynamic, temporal content. This enables applications that need to understand motion, sequences, actions, and changes over time—from security monitoring and content moderation to educational content analysis and entertainment applications.

*فهم الفيديو يمتد بقدرات الذكاء الاصطناعي إلى ما بعد الصور الثابتة إلى المحتوى الديناميكي والزمني. هذا يتيح التطبيقات التي تحتاج إلى فهم الحركة والتسلسلات والإجراءات والتغييرات بمرور الوقت—من مراقبة الأمان وإدارة المحتوى إلى تحليل المحتوى التعليمي وتطبيقات الترفيه.*

## Key Benefits

### Temporal Understanding
Videos capture motion, sequences, and changes over time that static images cannot. AI can understand actions, movements, temporal patterns, and dynamic scenes, enabling applications that require understanding of time-based content.

*الفيديوهات تلتقط الحركة والتسلسلات والتغييرات بمرور الوقت التي لا تستطيع الصور الثابتة التقاطها. يمكن للذكاء الاصطناعي فهم الإجراءات والحركات والأنماط الزمنية والمشاهد الديناميكية، مما يتيح التطبيقات التي تتطلب فهم المحتوى القائم على الوقت.*

### Action Recognition
AI can identify and describe actions happening in videos—from simple movements to complex activities. This enables applications like activity monitoring, sports analysis, and gesture recognition.

*يمكن للذكاء الاصطناعي تحديد ووصف الإجراءات التي تحدث في الفيديوهات—من الحركات البسيطة إلى الأنشطة المعقدة. هذا يتيح التطبيقات مثل مراقبة النشاط وتحليل الرياضة والتعرف على الإيماءات.*

### Content Analysis
Videos can be analyzed for content moderation, scene understanding, object tracking, and event detection. This enables automated content review and understanding of complex visual narratives.

*يمكن تحليل الفيديوهات لإدارة المحتوى وفهم المشاهد وتتبع الكائنات واكتشاف الأحداث. هذا يتيح مراجعة المحتوى الآلية وفهم السرد البصري المعقد.*

### Educational Applications
Educational videos can be analyzed to extract key concepts, summarize content, answer questions about video material, and provide learning support for students watching educational content.

*يمكن تحليل الفيديوهات التعليمية لاستخراج المفاهيم الرئيسية وتلخيص المحتوى والإجابة على الأسئلة حول المواد الفيديو وتوفير دعم التعلم للطلاب الذين يشاهدون المحتوى التعليمي.*

### Accessibility Features
Video analysis can generate descriptions, captions, and summaries for hearing-impaired users, making video content more accessible and inclusive.

*يمكن لتحليل الفيديو إنشاء أوصاف وترجمات وملخصات للمستخدمين ضعاف السمع، مما يجعل محتوى الفيديو أكثر سهولة في الوصول وشاملاً.*

## Use Cases

### Security and Surveillance
Analyze security camera footage to detect suspicious activities, identify events, monitor areas, and provide automated alerts. This enables 24/7 monitoring without constant human oversight.

*حلل لقطات كاميرات الأمان لاكتشاف الأنشطة المشبوهة وتحديد الأحداث ومراقبة المناطق وتوفير تنبيهات آلية. هذا يتيح المراقبة على مدار الساعة دون إشراف بشري مستمر.*

### Content Moderation
Automatically review video content for inappropriate material, violence, or policy violations. This enables scalable content moderation for platforms with large amounts of user-generated video content.

*راجع تلقائياً محتوى الفيديو للمواد غير المناسبة أو العنف أو انتهاكات السياسة. هذا يتيح إدارة المحتوى القابلة للتوسع للمنصات التي تحتوي على كميات كبيرة من محتوى الفيديو الذي ينشئه المستخدمون.*

### Sports Analysis
Analyze sports videos to track player movements, identify plays, extract statistics, and provide insights. This enables automated sports analysis and coaching support.

*حلل فيديوهات الرياضة لتتبع حركات اللاعبين وتحديد اللعب واستخراج الإحصائيات وتوفير الرؤى. هذا يتيح تحليل الرياضة الآلي ودعم التدريب.*

### Educational Content
Analyze educational videos to extract key points, generate summaries, answer student questions, and provide learning support. This enables enhanced educational experiences.

*حلل الفيديوهات التعليمية لاستخراج النقاط الرئيسية وإنشاء الملخصات والإجابة على أسئلة الطلاب وتوفير دعم التعلم. هذا يتيح تجارب تعليمية محسّنة.*

### Entertainment Applications
Analyze entertainment videos for scene understanding, content recommendations, automatic tagging, and metadata extraction. This enables better content organization and discovery.

*حلل فيديوهات الترفيه لفهم المشاهد وتوصيات المحتوى والوسم التلقائي واستخراج البيانات الوصفية. هذا يتيح تنظيم المحتوى والاكتشاف بشكل أفضل.*

## Performance Considerations

### Video Size and Duration
Larger videos and longer durations consume significantly more tokens and processing time. Video processing is computationally intensive—even short videos can consume thousands of tokens. Optimize video length and resolution based on actual needs.

*الفيديوهات الأكبر والمدة الأطول تستهلك رموزاً مميزة ووقت معالجة أكثر بكثير. معالجة الفيديو مكثفة حسابياً—حتى الفيديوهات القصيرة يمكن أن تستهلك آلاف الرموز المميزة. قم بتحسين طول ودقة الفيديو بناءً على الاحتياجات الفعلية.*

### Frame Rate Impact
Higher frame rates provide smoother motion but increase processing requirements. Most analysis tasks don't require maximum frame rates—standard frame rates (24-30 fps) are usually sufficient.

*معدلات الإطارات الأعلى توفر حركة أكثر سلاسة لكنها تزيد متطلبات المعالجة. معظم مهام التحليل لا تتطلب معدلات إطارات قصوى—معدلات الإطارات القياسية (24-30 fps) عادة ما تكون كافية.*

### Resolution Optimization
Video resolution significantly impacts token consumption. Higher resolution provides more detail but exponentially increases costs. Use appropriate resolution based on analysis needs—often 720p or 1080p is sufficient.

*دقة الفيديو تؤثر بشكل كبير على استهلاك الرموز المميزة. الدقة الأعلى توفر المزيد من التفاصيل لكنها تزيد التكاليف بشكل أسي. استخدم الدقة المناسبة بناءً على احتياجات التحليل—غالباً ما تكون 720p أو 1080p كافية.*

### Format Selection
Different video formats have different compression and quality characteristics. MP4 is widely supported and well-compressed. Choose formats based on compatibility and quality requirements.

*تنسيقات الفيديو المختلفة لها خصائص ضغط وجودة مختلفة. MP4 مدعوم على نطاق واسع ومضغوط جيداً. اختر التنسيقات بناءً على التوافق ومتطلبات الجودة.*

### Processing Time
Video processing takes longer than image processing due to temporal analysis. Expect longer response times for video analysis. Consider asynchronous processing for video-heavy applications.

*معالجة الفيديو تستغرق وقتاً أطول من معالجة الصور بسبب التحليل الزمني. توقع أوقات استجابة أطول لتحليل الفيديو. فكر في المعالجة غير المتزامنة للتطبيقات الثقيلة بالفيديو.*

## Cost Implications

### High Token Consumption
Videos consume significantly more tokens than images or text. Even short videos (30 seconds) can consume thousands of tokens. Longer videos can consume tens of thousands of tokens, making video processing expensive.

*الفيديوهات تستهلك رموزاً مميزة أكثر بكثير من الصور أو النص. حتى الفيديوهات القصيرة (30 ثانية) يمكن أن تستهلك آلاف الرموز المميزة. الفيديوهات الأطول يمكن أن تستهلك عشرات الآلاف من الرموز المميزة، مما يجعل معالجة الفيديو مكلفة.*

### Resolution and Cost
Higher resolution videos cost exponentially more due to increased pixel count and processing requirements. A 4K video can cost 4-8x more than a 720p video of the same duration.

*الفيديوهات عالية الدقة تكلف أكثر بشكل أسي بسبب زيادة عدد البكسل ومتطلبات المعالجة. فيديو 4K يمكن أن يكلف 4-8 مرات أكثر من فيديو 720p بنفس المدة.*

### Duration Impact
Longer videos cost more linearly with duration. A 5-minute video costs roughly 5x more than a 1-minute video. Consider segmenting long videos or extracting key frames for cost optimization.

*الفيديوهات الأطول تكلف أكثر خطياً مع المدة. فيديو مدته 5 دقائق يكلف تقريباً 5 مرات أكثر من فيديو مدته دقيقة واحدة. فكر في تقسيم الفيديوهات الطويلة أو استخراج الإطارات الرئيسية لتحسين التكلفة.*

### Format and Encoding
Base64 encoding increases video file size by ~33%, significantly increasing token consumption. For videos, always prefer URLs or file uploads over base64 to avoid encoding overhead.

*ترميز base64 يزيد حجم ملف الفيديو بنحو 33%، مما يزيد استهلاك الرموز المميزة بشكل كبير. للفيديوهات، افضل دائماً عناوين URL أو رفع الملفات على base64 لتجنب حمل الترميز.*

## Best Practices

### Optimize Video Length
Keep videos as short as possible while maintaining necessary content. Extract relevant segments rather than sending entire long videos. Most analysis tasks don't need full-length videos.

*حافظ على الفيديوهات قصيرة قدر الإمكان مع الحفاظ على المحتوى الضروري. استخرج المقاطع ذات الصلة بدلاً من إرسال الفيديوهات الطويلة الكاملة. معظم مهام التحليل لا تحتاج فيديوهات كاملة الطول.*

### Resolution Selection
Use 720p or 1080p resolution for most use cases. Higher resolutions are rarely necessary and significantly increase costs. Only use 4K when fine details are critical.

*استخدم دقة 720p أو 1080p لمعظم حالات الاستخدام. الدقات الأعلى نادراً ما تكون ضرورية وتزيد التكاليف بشكل كبير. استخدم 4K فقط عندما تكون التفاصيل الدقيقة حرجة.*

### Format Optimization
Use MP4 format for best compatibility and compression. Ensure videos are properly encoded to avoid processing errors. Compress videos before sending to reduce file size and costs.

*استخدم تنسيق MP4 لأفضل توافق وضغط. تأكد من ترميز الفيديوهات بشكل صحيح لتجنب أخطاء المعالجة. قم بضغط الفيديوهات قبل الإرسال لتقليل حجم الملف والتكاليف.*

### Use URLs for Large Videos
Always use URLs or file uploads for videos—never use base64 encoding. Base64 increases size by 33% and makes requests extremely large. For videos over 10MB, URLs are essential.

*استخدم دائماً عناوين URL أو رفع الملفات للفيديوهات—لا تستخدم ترميز base64 أبداً. base64 يزيد الحجم بنسبة 33% ويجعل الطلبات كبيرة جداً. للفيديوهات الأكبر من 10MB، عناوين URL ضرورية.*

### Segment Long Videos
For long videos, consider segmenting into shorter clips or extracting key frames. This reduces costs while maintaining analysis quality. Focus on relevant segments rather than full videos.

*للفيديوهات الطويلة، فكر في التقسيم إلى مقاطع أقصر أو استخراج الإطارات الرئيسية. هذا يقلل التكاليف مع الحفاظ على جودة التحليل. ركز على المقاطع ذات الصلة بدلاً من الفيديوهات الكاملة.*

## When NOT to Use

### Don't Send Full-Length Videos
Avoid sending entire long videos when only specific segments are needed. Extract relevant portions to reduce costs and processing time. Full-length videos are rarely necessary for analysis.

*تجنب إرسال الفيديوهات الطويلة الكاملة عندما تكون المقاطع المحددة فقط مطلوبة. استخرج الأجزاء ذات الصلة لتقليل التكاليف ووقت المعالجة. الفيديوهات كاملة الطول نادراً ما تكون ضرورية للتحليل.*

### Don't Use High Resolution Unnecessarily
Avoid 4K or very high resolution videos unless fine details are critical. High resolution exponentially increases costs without proportional benefits for most analysis tasks.

*تجنب فيديوهات 4K أو عالية الدقة جداً ما لم تكن التفاصيل الدقيقة حرجة. الدقة العالية تزيد التكاليف بشكل أسي دون فوائد متناسبة لمعظم مهام التحليل.*

### Don't Use Base64 for Videos
Never use base64 encoding for videos—it increases size by 33% and makes requests extremely large. Always use URLs or file uploads for video content.

*لا تستخدم ترميز base64 للفيديوهات أبداً—إنه يزيد الحجم بنسبة 33% ويجعل الطلبات كبيرة جداً. استخدم دائماً عناوين URL أو رفع الملفات لمحتوى الفيديو.*

### Don't Process Videos Without Clear Purpose
Avoid sending videos without specific analysis goals. Without clear instructions, the model may analyze irrelevant aspects, wasting tokens and money. Always provide specific analysis requirements.

*تجنب إرسال الفيديوهات دون أهداف تحليل محددة. بدون تعليمات واضحة، قد يحلل النموذج الجوانب غير ذات الصلة، مما يهدر الرموز المميزة والمال. وفر دائماً متطلبات تحليل محددة.*

## Troubleshooting

### Videos Not Processing
If videos aren't being processed, verify the model supports video inputs. Check video format is supported (MP4, MPEG, MOV, WEBM). Ensure videos are properly encoded and not corrupted. Check file size limits (typically 100MB).

*إذا لم تتم معالجة الفيديوهات، تحقق من أن النموذج يدعم مدخلات الفيديو. تحقق من أن تنسيق الفيديو مدعوم (MP4، MPEG، MOV، WEBM). تأكد من ترميز الفيديوهات بشكل صحيح وعدم تلفها. تحقق من حدود حجم الملف (عادة 100MB).*

### High Token Costs
If token costs are high, review video length, resolution, and format. Shorten videos to necessary segments. Reduce resolution to 720p or 1080p. Ensure you're using URLs instead of base64. Consider extracting key frames instead of full videos.

*إذا كانت تكاليف الرموز المميزة عالية، راجع طول الفيديو والدقة والتنسيق. قصر الفيديوهات على المقاطع الضرورية. قلل الدقة إلى 720p أو 1080p. تأكد من استخدام عناوين URL بدلاً من base64. فكر في استخراج الإطارات الرئيسية بدلاً من الفيديوهات الكاملة.*

### Processing Timeouts
If video processing times out, the video may be too long or too large. Segment long videos into shorter clips. Reduce resolution and file size. Consider asynchronous processing for video-heavy applications.

*إذا انتهت مهلة معالجة الفيديو، قد يكون الفيديو طويلاً جداً أو كبيراً جداً. قسّم الفيديوهات الطويلة إلى مقاطع أقصر. قلل الدقة وحجم الملف. فكر في المعالجة غير المتزامنة للتطبيقات الثقيلة بالفيديو.*

### Poor Analysis Results
If analysis results are poor, ensure videos are clear and properly encoded. Provide clearer text prompts with specific analysis requirements. Consider using models specifically trained for video understanding. Ensure adequate resolution for the analysis task.

*إذا كانت نتائج التحليل ضعيفة، تأكد من أن الفيديوهات واضحة ومشفرة بشكل صحيح. وفر مطالب نصية أوضح مع متطلبات تحليل محددة. فكر في استخدام النماذج المدربة خصيصاً لفهم الفيديو. تأكد من الدقة الكافية لمهمة التحليل.*

## Basic Usage

### From URL

*من URL*

```python
from app.builders import ChatRequestBuilder, ContentBuilder
from app.enums import MessageRole

video_content = ContentBuilder.from_url("https://example.com/video.mp4", "video")
request = (ChatRequestBuilder()
    .with_model("google/gemini-2.5-flash")
    .with_message(MessageRole.USER, [video_content])
    .with_text("Describe this video")
    .build())
```

### From Base64

*من Base64*

```python
import base64

with open("video.mp4", "rb") as f:
    video_base64 = base64.b64encode(f.read()).decode('utf-8')
    data_url = f"data:video/mp4;base64,{video_base64}"

video_content = ContentBuilder.from_base64_string(data_url, "video", "video/mp4")
```

### From Upload File

*من ملف مرفوع*

```python
from fastapi import UploadFile

async def process_video(upload_file: UploadFile):
    video_content = await ContentBuilder.from_upload_file(upload_file, "video")
    request = (ChatRequestBuilder()
        .with_model("google/gemini-2.5-flash")
        .with_message(MessageRole.USER, [video_content])
        .build())
```

### Supported Formats

*التنسيقات المدعومة*

- MP4
- MPEG
- MOV
- WEBM

### Video Size Limits

*حدود حجم الفيديو*

Default maximum: 100MB (configurable in `app/config.py`)

*الحد الأقصى الافتراضي: 100MB (قابل للتكوين في `app/config.py`)*

## Advanced Examples

### Video Analysis with Action Recognition

*تحليل الفيديو مع التعرف على الإجراءات*

```python
from app.builders import ChatRequestBuilder, ContentBuilder
from app.enums import MessageRole

video_content = ContentBuilder.from_url("https://example.com/sports.mp4", "video")

request = (ChatRequestBuilder()
    .with_model("google/gemini-2.5-flash")
    .with_message(MessageRole.USER, [video_content])
    .with_text("Identify all actions and movements in this video. Describe what happens in chronological order.")
    .build())
```

### Video Summarization

*تلخيص الفيديو*

```python
video_content = ContentBuilder.from_url("https://example.com/lecture.mp4", "video")

request = (ChatRequestBuilder()
    .with_model("google/gemini-2.5-flash")
    .with_message(MessageRole.USER, [video_content])
    .with_text("Summarize the key points covered in this educational video. Extract main topics and concepts.")
    .with_structured_output(
        schema={
            "type": "object",
            "properties": {
                "summary": {"type": "string"},
                "key_points": {
                    "type": "array",
                    "items": {"type": "string"}
                },
                "topics": {
                    "type": "array",
                    "items": {"type": "string"}
                }
            }
        },
        name="VideoSummary"
    )
    .build())
```

### Content Moderation

*إدارة المحتوى*

```python
video_content = ContentBuilder.from_url("https://example.com/user-video.mp4", "video")

request = (ChatRequestBuilder()
    .with_model("google/gemini-2.5-flash")
    .with_message(MessageRole.USER, [video_content])
    .with_text("Analyze this video for inappropriate content, violence, or policy violations. Report any issues found.")
    .with_structured_output(
        schema={
            "type": "object",
            "properties": {
                "is_appropriate": {"type": "boolean"},
                "issues_found": {
                    "type": "array",
                    "items": {"type": "string"}
                },
                "severity": {"type": "string"}
            }
        },
        name="ContentModeration"
    )
    .build())
```
